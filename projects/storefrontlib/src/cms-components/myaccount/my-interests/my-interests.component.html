<ng-container *ngIf="(interests$ | async) as interests">
  <div class="container">
    <div class="cx-product-interests-header">
      <h3>{{ 'myInterests.header' | cxTranslate }}</h3>
    </div>

    <div class="cx-product-interests-body">
      <ng-container
        *ngIf="interests.pagination.totalCount > 0; else noInterest"
      >
        <div class="cx-product-interests-sort top row">
          <div
            class="cx-product-interests-form-group form-group col-sm-12 col-md-4 col-lg-4"
          >
            <cx-sorting
              [sortOptions]="sortOptions"
              [sortLabels]="sortLabels"
              (sortListEvent)="sortChange($event)"
              [selectedOption]="sort"
              placeholder="{{ 'myInterests.sortByMostRecent' | cxTranslate }}"
            >
            </cx-sorting>
          </div>
          <div class="cx-product-interests-pagination">
            <cx-pagination
              [pagination]="pagination"
              (viewPageEvent)="pageChange($event)"
            ></cx-pagination>
          </div>
        </div>
        <table class="table cx-product-interests-table">
          <thead class="cx-order-history-thead-mobile">
            <th scope="col">
              {{ 'myInterests.item' | cxTranslate }}
            </th>
            <th scope="col"></th>
            <th scope="col">
              {{ 'myInterests.price' | cxTranslate }}
            </th>
            <th scope="col">
              {{ 'myInterests.subcriptions' | cxTranslate }}
            </th>
            <th scope="col"></th>
          </thead>
          <tbody>
            <tr *ngFor="let result of interests.results">
              <td>
                <div class="d-md-none "></div>
                <a
                  class="cx-product-interests-product-image-link"
                  [routerLink]="
                    { route: 'product', params: result.product } | cxUrl
                  "
                >
                  <cx-media
                    [container]="result.product.images?.PRIMARY"
                    format="thumbnail"
                  ></cx-media>
                </a>
              </td>
              <td>
                <div class="cx-info col-10">
                  <div class="cx-info-container row ">
                    <div class="">
                      <div *ngIf="result.product.name" class="cx-name">
                        <a
                          class="cx-link cx-product-interests-product-code-link"
                          [routerLink]="
                            { route: 'product', params: result.product } | cxUrl
                          "
                        >
                          {{ result.product.name }}
                        </a>
                      </div>
                      <div *ngIf="result.product.code" class="cx-code">
                        <span>{{
                          'myInterests.productId'
                            | cxTranslate: { code: result.product.code }
                        }}</span>
                      </div>

                      <div
                        *ngFor="
                          let variant of result.product.variantOptionQualifiers
                        "
                        class="cx-property"
                      >
                        <div class="cx-label">{{ variant.name }}</div>
                        <div class="cx-value">{{ variant.value }}</div>
                      </div>

                      <div
                        class="cx-property"
                        *ngIf="
                          result.product.stock.stockLevelStatus === 'outOfStock'
                        "
                      >
                        <div
                          class="cx-label cx-product-interests-product-stock"
                        >
                          {{ 'myInterests.outOfStock' | cxTranslate }}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </td>
              <td>
                <div class="d-md-none ">PRICE</div>
                {{ result.product.price.formattedValue }}
              </td>
              <td>
                <div class="d-md-none "></div>
                <div
                  class="notificaitonPanel"
                  *ngFor="let ientry of result.productInterestEntry"
                >
                  <span>
                    {{ ientry.interestType }}
                  </span>
                  <span>
                    {{
                      'myInterests.expirationDate'
                        | cxTranslate
                          : { expirationDate: ientry.expirationDate | date }
                    }}
                  </span>
                </div>
              </td>
              <td>
                <div class="d-md-none"></div>
                <button
                  type="button"
                  class="close"
                  aria-label="Close"
                  (click)="removeInterests(result)"
                >
                  <span aria-hidden="true">&times;</span>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
        <!-- Select Form and Pagination Bottom -->
        <div class="cx-product-interests-sort bottom row">
          <div
            class="cx-product-interests-form-group form-group col-sm-12 col-md-4 col-lg-4"
          >
            <cx-sorting
              [sortOptions]="sortOptions"
              [sortLabels]="sortLabels"
              (sortListEvent)="sortChange($event)"
              [selectedOption]="sort"
              placeholder="{{ 'myInterests.sortByMostRecent' | cxTranslate }}"
            >
            </cx-sorting>
          </div>
          <div class="cx-product-interests-pagination">
            <cx-pagination
              [pagination]="pagination"
              (viewPageEvent)="pageChange($event)"
            ></cx-pagination>
          </div>
        </div>
      </ng-container>

      <!-- NO ORDER CONTAINER -->
      <ng-template #noInterest>
        <div
          class="cx-product-interests-no-interests row"
          *ngIf="(loaded$ | async)"
        >
          <div class="col-sm-12 col-md-6 col-lg-4">
            <div>{{ 'myInterests.noInterests' | cxTranslate }}</div>
          </div>
        </div>
      </ng-template>
    </div>
  </div>
</ng-container>
